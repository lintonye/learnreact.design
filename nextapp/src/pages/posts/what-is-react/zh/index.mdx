import imgDomoBorn from './domo-born.png'
import imgDomoCssArtist from './domo-css-artist.png'
import imgTalkToDomo from './talk-to-domo.png'
import imgMultipleDevsTalk from './multiple-devs-talk.png'
import imgIntroReact from './intro-react.png'
import imgReactAgent from './react-agent.png'
import imgBreakIntoComponents from './break-into-components.png'
import imgComposableIndependent from './composable-independent.png'
import imgStepByStep from './imperative-step-by-step.png'
import imgThinker from './declarative-thinker.png'
import imgFlipbook from './flipbook.png'
import imgOptimizeSketches from './optimize-sketches.png'
import imgPlaceholders from './placeholders-in-sketch.png'
// import img from './.png'
import imgInspect from './inspect.png'
import imgHatShopChangeSearchBar from './hatshop-change-searchbar.png'
import imgHatShopComponents from './hatshop-components.png'
import imgHatShopDomoWithHat from './hatshop-DomoWithHat.png'
import imgHatShopSearchBarOnFooter from './hatshop-searchBar-on-footer.png'
import imgHatShop from './hatshop.png'

import imgSurprise from './surprise.png'

import { DomoAsciiArt } from '@/components/what-is-react/DomoAsciiArt'
import { IconBinocular } from '@/components/what-is-react/IconBinocular'
import { DomoHatShopDemo } from '@/components/what-is-react/DomoHatShopDemo'
import { CodeEditor } from '@/components/what-is-react/CodeEditor'
import { IntersectionDetector } from '@/components/IntersectionDetector'
import { FullBleed } from '@/components/FullBleed'
import { Connection } from '@/components/Connection'
import { ConvertKitForm } from '@/components/design-system/ConvertKitForm'
import imgSocialCard from './what-is-react-social-card.png'
import Image from 'next/image'

export const meta = {
  title: 'React åˆ°åº•æ˜¯ä»€ä¹ˆï¼šå†™ç»™ç»å¯¹å°ç™½çš„æ•™ç¨‹',
  description: `React is a JavaScript library for building user interfaces. This is the official definition of React. But what if you are not familiar with JavaScript? What if you are not a developer? Would you still be able to make sense of (and learn) React? My answer is a firm YES. `,
  date: '2021-02-02',
  tags: ['react'],
  related: ['what-is-react-native', 'what-is-redux'],
  ogImage: {
    url: imgSocialCard,
    width: 1280,
    height: 720,
  },
  surprise: {
    actor: () => <Image src={imgSurprise} width={145} height={145} />,
    animationVariants: {
      hidden: { x: -10, rotate: 0, y: 40 },
      revealed: { x: -150, rotate: 0, y: 40 },
    },
  },
}

<!--excerpt-->

"React is a JavaScript library for building user interfaces." This is the official definition. But what if you are not familiar with JavaScript? Would you still be able to make sense of (and learn) React? My answer is a firm YES.

<!--/excerpt-->

<!-- This is a guide for beginners, absolute beginners I mean. So you don't need to know JS to read this post. BUT, the concepts introduced in this article will be useful for you after you learn JavaScript. Understand why needs React in the first place.

React is an important idea. started 2013, unlike many other trendy JS frameworks, the core ideas in React haven't changed since the day one. Makes easier than ever to build UI. Makes design tools possible. Heavily influenced design tools. For the first time in history, the gap between design and development starts to diminish! Look at the tools such as Framer, Modulz.

Figma: design with code in mind - autolayout etc.

React is getting ever popular. Not just developers, For UX designers, many company prefers React experience.

What's this React thing?

Let's get started with something you might have heard many times, the DOM. -->

## ç®€ä»‹

> React ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚

è¿™æ˜¯ React çš„å®˜æ–¹å®šä¹‰ã€‚ä½†å¦‚æœæ‚¨å¯¹ JavaScript å¹¶ä¸ç†Ÿæ‚‰ï¼Œç”šè‡³æ ¹æœ¬ä¸æ˜¯ä¸€ä¸ªå¼€å‘è€…ï¼Œæ‚¨æœ‰æ²¡æœ‰å¯èƒ½ç†è§£å’Œå­¦ä¹  Reactï¼Ÿ

æˆ‘çš„å›ç­”æ˜¯ï¼šå½“ç„¶ï¼è¿™ä¹Ÿæ˜¯æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„åŠ¨å› ä¹‹ä¸€ã€‚æˆ‘å¸Œæœ›èƒ½å¤Ÿå›ç­”è¿™äº›é—®é¢˜ï¼šåˆ°åº• React æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒé‚£ä¹ˆå—æ¬¢è¿ï¼ŸReact è§£å†³äº†ä»€ä¹ˆå…·ä½“çš„é—®é¢˜ï¼Ÿ

æœ¬æ–‡æ˜¯å†™ç»™åˆå­¦è€…çš„ React ç®€ä»‹ï¼Œè¿™ä¹Ÿè®¸æ˜¯åœ¨å­¦ä¹ ä»»ä½• React å…·ä½“çŸ¥è¯†ä¹‹å‰æ‚¨åº”è¯¥è¯»çš„ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚æˆ‘å°†ä¼šç”¨é€šä¿—çš„è¯­è¨€ï¼ˆå’Œæ’ç”»æ¶‚é¸¦ <span className='text-base'>ğŸŒ´</span>ï¼‰æ¥å‘æ‚¨è®²è§£ React çš„æ ¸å¿ƒæ¦‚å¿µã€‚ä¸æ‡‚ JavaScriptï¼Ÿè¿™ä¸æ˜¯é—®é¢˜ï¼åªè¦æ‚¨å¯¹ HTML æœ‰å¤§è‡´çš„äº†è§£ï¼ˆä¾‹å¦‚ï¼ŒHTML æ ‡ç­¾çš„æ ¼å¼ï¼‰ï¼Œæ‚¨å°±åº”è¯¥èƒ½å¤Ÿé˜…è¯»è¿™ç¯‡æ–‡ç« å¹¶ä»ä¸­å—ç›Šã€‚

è¿™æ˜¯ä¸€å¹…é¸Ÿç°å›¾ <span className='text-2xl'>ğŸ¦…</span>ï¼Œä½†åŒæ—¶æˆ‘ä¹Ÿä¼šä¸ºæ‚¨è£…å¤‡äº†ä¸€å‰¯æœ›è¿œé•œ <IconBinocular size={25} className='inline-block align-center'/>ã€‚æ‚¨ä¸ä»…å°†çœ‹åˆ° React çš„æ¦‚ç•¥å›¾ï¼Œè€Œä¸”è¿˜å¯ä»¥æ”¾å¤§ã€æ”¾å¤§ã€çœ‹åˆ°ç»†èŠ‚ï¼ŒæŒ½èµ·è¢–å­å†™ä¸€ä¸ªçœŸæ­£çš„ React ç»„ä»¶ã€‚æ²¡é”™ï¼ŒJS ä¸æ˜¯å¿…éœ€çš„ï¼

è®°ä½ï¼šè¦äº†è§£ React çš„æ ¸å¿ƒæ€æƒ³ï¼Œæ‚¨å¹¶ä¸éœ€è¦æ˜¯ä¸€åæœ‰ç»éªŒçš„ç¨‹åºå‘˜ï¼

å‡†å¤‡å¥½å¯èˆªäº†å—ï¼Ÿ

<div className="p-8 bg-yellow-100 border border-yellow-400 rounded-sm space-y-4 my-2">
  <p>
    å½“ç„¶ï¼Œè¦çœŸæ­£ä½¿ç”¨ React çš„è¯ï¼Œæ‚¨è¿˜æ˜¯éœ€è¦å†™ä»£ç ã€‚æˆ‘æ­£åœ¨ç¼–å†™ä¸€ä¸ª Email é‚®ä»¶è¯¾ç¨‹æ¥å¸®åŠ©æ‚¨å°½å¿«è¿›å…¥çŠ¶æ€ã€‚
  </p>
  <p>
    æˆ‘ç›¸ä¿¡ï¼Œç»è¿‡å‡ å¤©çš„é›†ä¸­å­¦ä¹ ï¼Œæ‚¨å¯ä»¥æŒæ¡è¶³å¤Ÿçš„æŠ€å·§æ¥ä½¿ç”¨ React åšä¸€äº›æœ‰æ„ä¹‰çš„å·¥ä½œï¼Œ<strong>å³ä½¿æ‚¨æ²¡æœ‰ç¼–ç¨‹ç»éªŒ</strong>ã€‚å¦‚æœæœ‰å…´è¶£çš„è¯ï¼Œè¯·è¾“å…¥æ‚¨çš„ Email åœ°å€æ³¨å†Œã€‚è¯¾ç¨‹ç¼–å†™å®Œæˆä»¥åï¼Œæˆ‘ä¼šç¬¬ä¸€æ—¶é—´ç»™æ‚¨é€šçŸ¥ã€‚
  </p>

  <ConvertKitForm formId="2007263" subscribeButtonTitle="æ³¨å†Œ" successMessage="é©¬ä¸Šå°±å¥½ï¼Œè¯·æ”¶ä¸€ä¸‹é‚®ä»¶ï¼Œå¹¶ç¡®è®¤æ³¨å†Œã€‚"/>
</div>

## Web äºŒä¸‰äº‹

æˆ‘ä»¬ä»ä¸€ä¸ªæ‚¨æˆ–è®¸å¬è¯´è¿‡å¾ˆå¤šæ¬¡çš„æ¦‚å¿µå‡ºå‘ï¼šDOMã€‚

### DOM æ˜¯ä»€ä¹ˆï¼Ÿ

å½“æ‚¨å°†ä¸€ä¸ªç½‘ç«™çš„ç½‘å€è¾“å…¥æµè§ˆå™¨çš„æ—¶å€™ï¼Œä½ çš„ç”µè„‘å’Œè¿œæ–¹çš„å¦ä¸€å°ç”µè„‘å°±å¼€å§‹å¯¹è¯ã€‚è¿™å°è¿œæ–¹çš„ç”µè„‘ä¸€èˆ¬è¢«ç§°ä¹‹ä¸º _æœåŠ¡å™¨_ã€‚ä½ çš„ç”µè„‘å‘å‡ºè¯·æ±‚ï¼Œå‘æœåŠ¡å™¨ç´¢å–æŸç§ä¿¡æ¯ï¼ŒæœåŠ¡å™¨éšå³åšå‡ºåº”ç­”ï¼š

> **ä½ çš„ç”µè„‘ï¼š** ä¼™è®¡ï¼Œè¿™ä¸ªç½‘ç«™ä¸Šæœ‰å•¥å¥½ä¸œè¥¿å•Šï¼Ÿç½‘å€æ˜¯ï¼šlearnreact.design
>
> **æœåŠ¡å™¨ï¼š** å°‘å®‰æ¯‹èºï¼Œè®©æˆ‘æ‰¾æ‰¾ã€‚å˜€ã€‚å˜Ÿã€‚

æœåŠ¡å™¨çš„åº”ç­”æ•°æ®ä¸»è¦åŒ…æ‹¬äº†ä¸‰ä¸ªéƒ¨åˆ†ï¼šHTMLã€CSS å’Œ JavaScriptã€‚

HTML åˆ—ä¸¾å‡ºä¸€ä¸ªç½‘é¡µçš„å†…å®¹å¹¶æè¿°å…¶ç»“æ„ã€‚é¡µé¢ä¸Šæœ‰å¤šå°‘ä¸ªæ ‡é¢˜å’Œæ®µè½ï¼Ÿç»™ç”¨æˆ·æ˜¾ç¤ºä»€ä¹ˆå›¾ç‰‡ï¼Ÿè¿™ä¸ªæŒ‰é’®å’Œé‚£ä¸ªæ–‡æœ¬è¾“å…¥æ¡†æ˜¯ä¸æ˜¯åº”è¯¥æ”¾åˆ°åŒä¸€ä¸ªå®¹å™¨é‡Œï¼Ÿ

åˆ©ç”¨ HTML é‡Œçš„ä¿¡æ¯ï¼Œæµè§ˆå™¨å°†ä¼šåˆ›å»ºä¸€ä¸ªå«åš DOM çš„ä¸œè¥¿ã€‚

<img src={imgDomoBorn} alt="Introducing the DOM" />

å—¯ï¼Ÿç­‰ç­‰ï¼ŒDOM æ˜¯ä¸€æ£µæ ‘ï¼Ÿå›ç­”æ­£ç¡®ï¼Œå°±æ˜¯ä¸€æ£µæ ‘ï¼æˆ‘ä»¬ç”µè„‘é‡Œæœ‰å¾ˆå¤šä¸œè¥¿éƒ½çœ‹èµ·æ¥åƒä¸€æ£µæ ‘ï¼Œæˆ‘çŸ¥é“è¿™å¬èµ·æ¥æœ‰ç‚¹å¥‡æ€ªã€‚æˆ‘ä»¬ç»™è¿™ä½å¤§æ ‘æœ‹å‹èµ·ä¸ªå¤–å·å§ï¼Œå« Domo å¦‚ä½•ï¼Ÿ

Domo åœ¨ä¸€é—´åä¸ºâ€Web æµè§ˆå™¨â€œçš„è‰ºæœ¯å·¥ä½œå®¤é‡Œåšäººä½“æ¨¡ç‰¹ï¼ˆå“¦ï¼Œä¸å¯¹ï¼Œæ˜¯æ ‘ä½“æ¨¡ç‰¹ï¼‰ã€‚è·Ÿå…¶ä»–çš„æ¨¡ç‰¹ä¸€æ ·ï¼ŒDomo çš„å·¥ä½œå°±æ˜¯æ‘†å‡ºå„ç§å§¿åŠ¿ï¼Œè®©ç”»å®¶ç»™ä»–ç”»ä¸€å‰¯â€œæ ‘â€ä½“å†™ç”Ÿã€‚

<img src={imgDomoCssArtist} alt="Domo at the art studio Web Browser" />

DOM æ˜¯ Document Object Model çš„ç¼©å†™ã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œå®ƒç¡®å®æ˜¯ä¸€ä¸ªæ¨¡ç‰¹ï¼Œæˆ–è€…è¯´æ˜¯æ¨¡å‹ï¼Œæ˜¯ç½‘é¡µæ–‡æ¡£çš„æ¨¡å‹ã€‚å½“ DOM æ‘†å‡ºä¸€ä¸ªå§¿åŠ¿æ—¶ï¼Œæµè§ˆå™¨å°±å¼€å§‹å†™ç”Ÿã€‚è¿™äº›æ‰€è°“çš„å†™ç”Ÿç”»å°±æ˜¯æˆ‘ä»¬åœ¨ç½‘é¡µä¸Šæ‰€çœ‹åˆ°çš„å†…å®¹ï¼šæ–‡æœ¬æ¡†ã€æ®µè½ã€å›¾ç‰‡ç­‰ç­‰ã€‚ç¨‹åºå‘˜çš„èŒè´£å°±æ˜¯å‘Šè¯‰ Domo å¦‚ä½•ç©¿æˆ´å’Œå¦‚ä½•æ‘†å§¿åŠ¿ã€‚è¿™å°±å†³å®šäº†ç½‘é¡µä¸Šæœ€ç»ˆæ˜¾ç¤ºä»€ä¹ˆå†…å®¹ã€‚

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨æ¡Œé¢ç”µè„‘çš„æµè§ˆå™¨ï¼ˆå¦‚ Chromeï¼‰çœ‹è¿™ç¯‡æ–‡ç« ï¼Œåœ¨é¡µé¢ä¸Šå³å‡»é¼ æ ‡ã€é€‰æ‹©â€œInspectâ€ï¼Œå°±å¯ä»¥åœ¨ Element æ ‡ç­¾é¡µé‡Œçœ‹åˆ° DOM çš„çœŸå®æ¨¡æ ·ã€‚

<img src={imgInspect} alt="Inspect in Chrome" width={2048} height={1536} />

<DomoAsciiArt />

### DOM çš„ API

æˆ‘ä»¬ç»å¸¸å¸Œæœ›ä¸€ä¸ªç½‘é¡µæ˜¯åŠ¨æ€å’Œäº¤äº’å¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç½‘é¡µçš„å†…å®¹ä¸æ—¶å‘ç”Ÿå˜åŒ–ã€‚ä¸€ä¼šåœ¨è¿™é‡ŒåŠ ç‚¹æ–‡å­—ï¼Œä¸€ä¼šåˆæ˜¾ç¤ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œä¸€ä¼šåˆæ ¹æ®ä»æœåŠ¡å™¨ä¸‹è½½çš„æ•°æ®æ›´æ–°å›¾è¡¨ã€‚

è®°ä½ï¼Œä»»ä½•æ—¶å€™å¦‚æœæƒ³ç½‘é¡µå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ›´æ”¹ DOMã€‚Domo å¦‚æœä¸æ”¹å˜å§¿åŠ¿ï¼Œæµè§ˆå™¨é‡Œçš„ç”»å®¶å°±ä¸å¯èƒ½ç”»å‡ºæ–°çš„ä½œå“ã€‚

é‚£ä¹ˆï¼Œæ€æ ·æ‰èƒ½è®© Domo æ”¹å˜å§¿åŠ¿å‘¢ï¼Ÿ

æˆ‘ä»¬ç›´æ¥å‘Šè¯‰ä»–å°±è¡Œäº†ï¼Œä»–ä¼šå¬çš„ã€‚æœ‰æ„æ€çš„æ˜¯ï¼ŒDomo çš„è€³æœµè¿˜æœ‰ä¸€ä¸ªä¸“å±çš„åå­—ï¼šAPIã€‚

<img src={imgTalkToDomo} alt="A developer works with DOM API" />

ç¨‹åºå‘˜ä»¬ä½¿ç”¨ JavaScript ä¹¦å†™ä»£ç æ¥å‘ DOM API ä¸‹è¾¾å‘½ä»¤ï¼Œäºæ˜¯ï¼Œç½‘é¡µå†…å®¹ä¾¿éšç€ DOM çš„æ›´æ”¹è€Œå‘ç”Ÿå˜åŒ–ã€‚

### è¶Šæ¥è¶Šå¤æ‚çš„ web å¼€å‘

å¤šå¹´æ¥ï¼Œç›´æ¥ä¸ DOM å¯¹è¯ä¸€ç›´æ˜¯ web å¼€å‘çš„æ ‡å‡†æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯å½“å¤§å¤šæ•° web å†…å®¹æ˜¯é™æ€çš„æ—¶å€™ã€‚ç¨‹åºå‘˜ä»¬å…¸å‹çš„åšæ³•æ˜¯ï¼Œåœ¨é™æ€é¡µé¢çš„åŸºç¡€ä¸Šå†™ä¸€äº› JavaScript ä»£ç åœ¨é¡µé¢ä¸ŠåŠ ä¸€ç‚¹ç‚¹äº¤äº’ç‰¹æ€§ã€‚

ç„¶è€Œï¼Œå½“ä¼—å¤šçš„ SPA ï¼ˆSingle Page Applicationï¼‰å‡ºç°åï¼Œä¾‹å¦‚ï¼ŒGmail å’Œ Google åœ°å›¾ï¼Œç”¨æˆ·å¼€å§‹å¯¹ web èƒ½åšçš„äº‹æœ‰äº†æ›´é«˜çš„æœŸæœ›ã€‚ä»–ä»¬ä¸å†åªæ»¡è¶³äºå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯é™æ€çš„ web _é¡µé¢_ï¼Œä»–ä»¬æ›´å¸Œæœ›çœ‹åˆ°çš„æ˜¯ web _åº”ç”¨_ï¼šäº¤äº’æ€§å¼ºã€é€Ÿåº¦å¿«æ·ã€å“åº”è¿…é€Ÿã€‚

ä¸ºäº†å¼€å‘æ»¡è¶³è¿™äº›æ¡ä»¶çš„ web åº”ç”¨ï¼Œä»£ç å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œè€Œä¸”é€šå¸¸éœ€è¦å¤šäººåä½œã€‚

Web å¼€å‘çš„ä¼ ç»Ÿæ–¹æ³•å¼€å§‹é€æ¸å¤±æ•ˆï¼Œä¸ DOM ç›´æ¥å¯¹è¯æ˜¾å¾—ä½æ•ˆè€Œç¹çã€‚

<!-- 1. Web apps are getting large and complex. Development of a web app often requires team collaboration
2. The DOM itself has some issues. It's slow to update the entire DOM for a large page. The behaviors of different browsers have subtle differences.
3. It's also not efficient to directly talk to Domo. -->

<img
  src={imgMultipleDevsTalk}
  alt="Directly working with the DOM API is getting chaotic"
/>

## React çš„æ ¸å¿ƒæ€æƒ³

å…ˆç”Ÿä»¬ã€å¥³å£«ä»¬ï¼Œè®©æˆ‘ä»¬éš†é‡æ¬¢è¿ä¸€ä½è¶…çº§è‹±é›„å‡ºåœºï¼Œé‚£å°±æ˜¯ Reactï¼

<img src={imgIntroReact} alt="Introducing React" height={900} />

åœ¨ React çš„å¸®åŠ©ä¸‹ï¼Œç¨‹åºå‘˜ä»¬ä¸å†ç›´æ¥ä¸ Domo å¯¹è¯ã€‚React å……å½“èµ·äº†ç¨‹åºå‘˜çš„ä»£è¨€äººã€‚ä»–å°†ç¨‹åºå‘˜ä¸ Domo ä¹‹é—´çš„æ²Ÿé€šå˜å¾—æ— æ¯”é¡ºç•…ï¼Œå°†å†™ç”Ÿçš„è¿‡ç¨‹ç®¡ç†å¾—äº•äº•æœ‰æ¡ã€‚

<img
  src={imgReactAgent}
  alt="React as an agent between a developer and the DOM"
/>

React æ˜¯ç”± JavaScript å¼€å‘è€Œæˆï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€æ˜¯è®©æˆ‘ä»¬åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸å†éœ€è¦ç›´æ¥æ“ä½œ DOM APIã€‚å–è€Œä»£ä¹‹  çš„æ˜¯ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™ç›¸å¯¹ç®€å•çš„ä»£ç ï¼Œè€Œ React å°†å…¶ç¿»è¯‘ä¸º DOM ç†è§£çš„è¯­è¨€ã€‚

React å…·æœ‰å®Œç¾å¤„ç†ä¸æ—¥ä¿±å¢çš„ web å¼€å‘å¤æ‚åº¦çš„è¶…èƒ½åŠ›ï¼Œå½’çº³èµ·æ¥æœ‰ä¸‰æ¡ï¼š

- ç»„ä»¶ï¼ˆComponentï¼‰
- å£°æ˜å¼ç•Œé¢ç¼–ç¨‹ï¼ˆDeclarative UIï¼‰
- åº”æ¿€å¼ DOM æ›´æ–°æœºåˆ¶ï¼ˆReactive DOM updatesï¼‰

å¦‚æœè¿™å‡ ä¸ªåè¯å¯¹ä½ æ¥è¯´å¬èµ·æ¥åƒå¤©ä¹¦ï¼Œåˆ«æ‹…å¿ƒï¼æˆ‘ä¼šç”¨ç®€å•çš„è¯­è¨€å’Œæ’ç”»æ¥å¸®ä½ ç†è§£ã€‚ç›¸ä¿¡æˆ‘ï¼Œå¹¶ä¸æ˜¯é‚£ä¹ˆéš¾ã€‚

ç»§ç»­å¾€ä¸‹è¯»å§ï¼

### ç»„ä»¶

ç»„ä»¶æ˜¯ React çš„æ——èˆ°åŠŸèƒ½ã€‚å…¶æ ¸å¿ƒæ€æƒ³åŸºäºä¸€ä¸ªç®€å•çš„ç­–ç•¥ï¼šåˆ†è€Œæ²»ä¹‹ã€‚å¦‚æœä¸€ä¸ªé—®é¢˜ä½œä¸ºä¸€ä¸ªæ•´ä½“å¾ˆéš¾ç†è§£é€å½»å’Œè§£å†³ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒåˆ†æ‹†ä¸ºå¤šä¸ªå°é—®é¢˜ï¼Œå„ä¸ªå‡»ç ´ï¼Œæœ€åå†å°†ç»“æœç»¼åˆèµ·æ¥ã€‚

<img
  src={imgBreakIntoComponents}
  alt="React breaks a problem into components"
/>

ä½¿ç”¨ React å†™ç¨‹åºçš„æ—¶å€™ï¼Œå‡ ä¹æ‰€æœ‰çš„æ—¶å€™éƒ½æ˜¯è·Ÿç»„ä»¶æ‰“äº¤é“ï¼šå°†æ•´ä¸ªåº”ç”¨åˆ†å‰²ä¸ºç»„ä»¶ã€å¯»æ‰¾æœ€åˆé€‚çš„ç»„ä»¶ã€å°†ä¸åŒç»„ä»¶æ‹¼è£…èµ·æ¥ã€åœ¨åŸæœ‰ç»„ä»¶åŸºç¡€ä¸Šåˆ¶ä½œæ–°ç»„ä»¶ï¼Œå¦‚æ­¤ç­‰ç­‰ã€‚

ç°ä»Šçš„è®¾è®¡å·¥å…·ä¹Ÿæ”¯æŒç»„ä»¶åŠŸèƒ½ï¼Œä¾‹å¦‚ Framer å’Œ Figmaï¼Œå†å¦‚ Sketch ä¸­çš„ symbolã€‚è¿™äº›ç»„ä»¶ä¸ React ä¸­çš„ç»„ä»¶å±äºåŒä¸€ä¸ªæ¦‚å¿µï¼Œåªä¸è¿‡åè€…æ›´åŠ çµæ´»å’ŒåŠŸèƒ½å¼ºå¤§ã€‚äº‹å®ä¸Šï¼Œè¿™äº›å·¥å…·ä¸­ç»„ä»¶çš„è®¾è®¡çµæ„Ÿç›´æ¥æ¥è‡ªäºè½¯ä»¶å·¥ç¨‹ä¸­çš„ç»„ä»¶æ¦‚å¿µã€‚

ä¸€æ—¦ä¸€ä¸ªç»„ä»¶åˆ›å»ºå®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥å¤šæ¬¡ä½¿ç”¨å®ƒï¼ˆåˆ›å»ºç»„ä»¶å®ä¾‹ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªç»„ä»¶åˆ›å»ºå¦å¤–çš„ç»„ä»¶ã€‚å½“ä¸€ä¸ªç»„ä»¶å‘ç”Ÿå˜åŠ¨æ—¶ï¼ŒåŒ…å«è¿™ä¸ªç»„ä»¶çš„æ‰€æœ‰å…¶ä»–ç»„ä»¶ä¹Ÿä¼šè‡ªåŠ¨å‘ç”Ÿç›¸åº”å˜åŒ–ã€‚

React ç»„ä»¶æœ‰ä¸¤æ¡é‡è¦çš„å±æ€§ï¼š

1. ç»„ä»¶æ˜¯*å¯ç»„åˆçš„*ï¼ˆcomposableï¼‰ã€‚ç»„ä»¶çš„ç›®çš„åœ¨äºé‡ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç°æœ‰ç»„ä»¶åˆ›å»ºæ–°ç»„ä»¶ã€‚
2. ä¸€ä¸ªç»„ä»¶*ç‹¬ç«‹äº*å…¶å®ƒç»„ä»¶ï¼ˆindependentï¼‰ã€‚å½“ä¿®æ”¹ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œå…¶ä»–ç»„ä»¶ä¸ä¼šå—åˆ°ä¸è‰¯å½±å“ã€‚

å¦‚æœä»¥ä¸Šå¬èµ·æ¥å¤ªæŠ½è±¡ï¼Œä¸è¦æ‹…å¿ƒã€‚æˆ‘é©¬ä¸Šä¼šä½¿ç”¨ä¸€äº›ä¾‹å­ä¸ºæ‚¨è¯¦ç»†è§£é‡Šã€‚

<!--
<img
  src={imgComposableIndependent}
  alt="React components are composable and independent"
/> -->

### å£°æ˜å¼ç”¨æˆ·ç•Œé¢ï¼ˆDeclarative UIï¼‰

#### å‘½ä»¤å¼ä¸å£°æ˜å¼

å½“ç›´æ¥æ“ä½œ DOM API æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®å†™å‡ºåœ¨å…·ä½“ä»€ä¹ˆæ—¶å€™ã€ä»¥ä½•ç§é¡ºåºæ¥ä¿®æ”¹å“ªä¸ªå…ƒç´ ã€‚è¿™ç§æ“ä½œå°±åƒæ‰‹æŠŠæ‰‹ã€ä¸€æ­¥ä¸€æ­¥åœ°æŒ‡å¯¼ Domo è¯¥æ€ä¹ˆæ‘†å§¿åŠ¿ï¼šå¤´è¯¥æ€ä¹ˆåã€æ‰‹æ‘†å“ªå„¿ã€è„šæ€ä¹ˆç«™ã€‚

<img src={imgStepByStep} alt="Imperative programming" />

å—¨ï¼Œè¿™å¬èµ·æ¥æ˜¯ä¸æ˜¯ç¹çåˆå®¹æ˜“å‡ºé”™ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥å‘Šè¯‰ Domo æˆ‘ä»¬æƒ³è¦*ä»€ä¹ˆ*ï¼Œè€Œä¸æ˜¯*æ€ä¹ˆ*åšï¼Ÿä½¿ç”¨ React å†™ç¨‹åºå°±æ˜¯è¿™ä¸ªæ€è·¯ï¼ç¨‹åºå‘˜ç”»ä¸€ä¸ªç®€å›¾æè¿°æ‰€æœŸå¾…çš„ç»“æœï¼ŒReact ä»£åŠ³å‘ Domo è§£é‡Šæ€ä¹ˆæ‘†å§¿åŠ¿ã€‚

<img src={imgThinker} alt="Declarative programming in React" />

Because the apps we build are dynamic, we often want Domo to change poses fairly quickly. We draw many sketches and hand them to React in a big pile. React stacks these sketches together and flips them like a flipbook. A dynamic UI comes live!

<img src={imgFlipbook} alt="React treats input as a flipbook" />

In tech terms, if the code defines _how_ we want it to be done, it's **imperative**; if it defines _what_ we want, it's **declarative**. The traditional way of directly working with the DOM API is imperative, and the React way is declarative.

Imperative programming emerged from the day when the computers were primitive. People had to instruct them in detail: where to store the numbers, how to multiply etc. But this eventually got unmanageable, people wrote smart software that convert definition of problems into detailed instructions. Declarative programming was born.

#### Virtual DOM

Besides making the life of a developer easier, declarative programming in React also offers opportunities for performance optimization.

When React has all the sketches beforehand, he can sort through them, remove any duplication and make sure that Domo and the artist do as little work as possible.

<img src={imgOptimizeSketches} alt="React diffing with virtual DOM" />

These sketches are called _Virtual DOM_. Virtual DOM is much faster to manipulate than the DOM. Developers work with Virtual DOM most of the time instead of directly managing the DOM. React handles the dirty work of managing the slow DOM.

### Reactive DOM updates

Even cooler, imagine if we can leave placeholders in our sketches to represent different variations of a same pose. This way, when somebody asks for portraits of Domo wearing a different hat, we don't have to talk to React again. We can just sit back and let React change it for us.

<img src={imgPlaceholders} alt="Thinker with a hat: Placeholder in JSX" />

This trick is how React got its name. The UI built with React is **reactive** -- it appears that the DOM "reacts" to any changes to the underlying data. No need to track the data. No need to worry about when to update the DOM. It just gets updated automatically (by React). The idea of reactive UI greatly simplifies UI development.

<!-- Here's the code of the demo above. If you are not familiar with JavaScript, just squint: it's some HTML surrounded by some text and parentheses.

```jsx
const ThinkerWithHat = ({ hat }) => (
  <div>
    <Hat type={hat} />
    <Thinker />
  </div>
)
```

Notice that we just need to define what we want (a thinker and a hat in a div), and "wire up" the data ("`type = {hat}`"). When the data change (user selects a hat), the UI updates automatically. -->

<FullBleed className="md:grid md:grid-cols-2 items-start gap-x-8 my-8 pb-4 bg-indigo-50 z-20 justify-items-start">

  <div className="col-start-1 col-end-3 text-3xl font-bold py-12 mb-8 justify-self-stretch text-center bg-indigo-200 text-indigo-900">

## Write your first React component

  </div>

  <div className="max-w-prose justify-self-end space-y-5 w-11/12 mx-auto md:ml-8 md:mx-none">

Now let's review what we have learned so far and get our hands dirty on a few real React components. To make it easy for you to understand, I left out some details in the code (notedly JavaScript). The goal is to let the core ideas shine through without being bogged down by JS syntax. If you are comfortable with reading JavaScript code, feel free to check out the [real source code](https://codesandbox.io/s/domos-hat-shop-4x7n0?file=/src/App.js).

Alright. Let's say we want to help Domo build an online hat store ğŸ§¢ .

<div className="md:hidden">
  <img src={imgHatShop} alt="Domo's hat shop UI" />
</div>

### Components are composable

We can break the UI into a few parts:

- Header: the header on the top
- Main: the main content area
- Footer: the footer on the bottom

<div className="my-4 md:hidden">
  <img
    src={imgHatShopComponents}
    alt="Domo's hat shop UI divided into components"
  />
</div>

<IntersectionDetector onIntersectionChange={({isIntersecting, dispatch}) => {
    if (isIntersecting) {
      dispatch({type: "highlights", data: "Header Main Footer:labels-only"})
    }
  }}>

This decomposition can be written in code like so:

<div id="connection-decomposition">

```jsx
// DomoHatShopHome
<div>
  <Header />
  <Main />
  <Footer />
</div>
```

</div>

</IntersectionDetector>

This looks like HTML, right? Except for those tags that start with capital letters: `<Header>`, `<Content>` and `<Footer>`. They are not standard HTML tags. They are custom tags.

What are these custom tags actually? How would we tell React that the Header consists of a header tag, a bunch of list items and a search bar?

We write the Header component!

```jsx
// Header
<header>
  <nav>
    <ul>
      <li>Home</li>
      <li>
        <SearchBar />
      </li>
      <li>Account</li>
      <li>Return &amp; Orders</li>
      <li>
        <ShoppingCart />
      </li>
    </ul>
  </nav>
</header>
```

<IntersectionDetector onIntersectionChange={({isIntersecting, dispatch}) => {
    if (isIntersecting) {
      dispatch({type: "highlights", data: "SearchBar ShoppingCart"})
    }
  }}>

Now in this Header component, it includes two custom tags `<SearchBar>` and `<ShoppingCart>`. What's in there?

<div id="connection-searchbar-shoppingcart">

```jsx
// SearchBar
<form>
  <input type="string" />
  <button>Search</button>
</form>

// ShoppingCart
<div>
  <FiShoppingCart size={20} />
  <div>
    2
  </div>
</div>
```

</div>

Remember the first important property of React components? They are **composable**. This means that we can use components to build other components -- exactly what we have just done.

</IntersectionDetector>

<IntersectionDetector onIntersectionChange={({isIntersecting, dispatch}) => {
    if (isIntersecting) {
      dispatch({type: "highlights", data: ""})
      document.getElementById("code-editor-updateFooter").focus()
    }
  }}>

Now here's an exercise for you<span className="md:hidden"> (open this page in a desktop browser for the best experience)</span>:

<div id="connection-add-searchbar" className="bg-indigo-100 px-3 py-3 rounded-md my-5 space-y-5">

âœï¸ Let's say we want to add the SearchBar into the Footer as well. What would you do? **Edit the code below:**

<CodeEditor
  code={`<footer>
  <div>Â© 2021 Domo's Hat Shop</div>
</footer>`}
  onChange={(jsxJson, dispatch) =>
    dispatch({ type: 'updateFooter', data: jsxJson })
  }
  textareaId="code-editor-updateFooter"
/>

<div className="text-sm">

Hints:

- Make sure to put tags inside `<footer>`
- Scroll up to check the code of `Header`
- Try adding some other tags

</div>

</div>

Did you get two search bars? You get the idea!

<div className="my-2 md:hidden">
  <img
    src={imgHatShopSearchBarOnFooter}
    alt="Domo's hat shop UI: searchBar on footer"
  />
</div>

</IntersectionDetector>

### Components are made for reuse

"Composable" means being able to create a component using other components as its building blocks. This sounds very similar to how nature works, except for one important difference: in React, once we use a component in another component, it still "attaches" to the original component. When the original changes, all instances update along with it.

<div id="connection-change-searchbar" className="bg-indigo-100 px-3 py-3 rounded-md">

âœï¸ Change the text on the button in the code of SearchBar below:

<CodeEditor
  code={`<form>
  <input type="string" />
  <button>Search</button>
</form>`}
  onChange={(jsxJson, dispatch) =>
    dispatch({ type: 'updateSearchBar', data: jsxJson })
  }
/>

</div>

What did you see? The SearchBar on both Header and Footer updates. Right? This works very similarly to components in design tools such as Framer and Figma.

React components are made for **reuse**. Once a component is defined, we can use it as a custom tag in other components, as many times as we want. If we change the component, all components that include it will change accordingly.

### Components are independent

Remember? React components are also **independent**. This means if we change one component, other components (that don't include it) still behave the same way as before.

When we change the SearchBar component above, only the Header and Footer change. This may sound very straightforward (perhaps too obvious). But it's a fundamental idea in software engineering and it goes a long way to keep software development manageable.

### Declarative & Reactive

<div className="hidden md:block">

Now let's move on to the Main component. Have you choosen a hat for Domo yet? The demo on the right is not just an image. It's interactive!

</div>

<IntersectionDetector onIntersectionChange={({isIntersecting, dispatch}) => {
    if (isIntersecting) {
      dispatch({type: "highlights", data: "DomoWithHat"})
    }
  }}>

Here's the code for the component DomoWithHat, the widget on the left.

<div id="connection-domowithhat">

```jsx
// DomoWithHat
<div>
  <Hat type={hat} />
  <Domo />
</div>
```

</div>

<div className="md:hidden my-2">
  <img src={imgHatShopDomoWithHat} alt="Domo's hat shop UI" />
</div>

Note that we just need to define what we want (Domo and a hat in a div), and "wire up" the data ("`type = {hat}`"). When the data change (user selects a hat), the UI updates automatically. We don't need to worry about when and how to update the DOM. We don't even need to keep track of the data. What we need is just to draw a quick sketch, i.e. the code above. Remember the other two superpowers of React? **Declarative UI** and **Reactive DOM updates**.

</IntersectionDetector>
</div>

<DomoHatShopDemo
  className="top-20 sticky z-10 mr-8 hidden md:block"
  id="domo-hat-shop-ui"
/>

<div className="hidden fixed inset-0 pointer-events-none z-30 md:block">
  <Connection idLeft="connection-decomposition" idRight="domo-hat-shop-ui" />
  <Connection
    idLeft="connection-searchbar-shoppingcart"
    idRight="domo-hat-shop-ui"
  />
  <Connection idLeft="connection-add-searchbar" idRight="domo-hat-shop-ui" />
  <Connection idLeft="connection-change-searchbar" idRight="domo-hat-shop-ui" />
  <Connection idLeft="connection-domowithhat" idRight="domo-hat-shop-ui" />
</div>

</FullBleed>

## Conclusion

Congrats! You've finished the first important lesson of React! It's about the big picture: why do we need React at all? Here are the three core ideas that make React powerful: Components, Declarative UI and Reactive DOM updates.

In fact, I bet even some experienced React developers (for example, myself!) are not super clear about these concepts. When I wrote the first version of this article a few years ago, I put focus on the wrong things. Hopefully this revision is more accurate!

Here's a list of terms covered in the post:

- The DOM (Document Object Model)
- The DOM API
- React components
- Components are composable and independent
- Imperative vs. declarative programming
- Virtual DOM
- Reactive DOM updates
